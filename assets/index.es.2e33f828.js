import{_ as e}from"./tslib.es6.d5acbd82.js";var t=function(){function t(t){var o=t.el,i=t.options;o instanceof HTMLElement?this.el=o:this.el=document.querySelector(o),this.options=e({immediate:!1,direction:["right"],scrollElSelector:null,lineColor:"#aab",lineWidth:2,lineHoverColor:"#88f",lineHoverWidth:4,tipLineColor:"#262626",tipLineWidth:1,tipLineStyle:"dashed",zIndex:999,needParentNodeOffset:!0},i),this.directionArr=this.options.direction||["right"],this.el.$resize=this}return t.prototype.init=function(){var e=this;"static"===getComputedStyle(this.el).position&&(this.el.style.position="relative"),this.directionArr.map((function(t){if(e.options.immediate){var o=e.createLineEl(t);e.el.appendChild(o)}else{var i=e.createDashedLineEl(t);o=e.createLineEl(t,i);e.el.appendChild(i),e.el.appendChild(o)}}))},t.prototype.createDashedLineEl=function(e){var t=this.options,o=t.tipLineColor,i=t.tipLineWidth,n=t.tipLineStyle,r=t.zIndex,s=document.createElement("div"),l="position:absolute;z-index: "+r+";visibility: hidden;",d="left"===e||"right"===e;return s.style.cssText=d?l+";top:0;bottom: 0;"+e+":0;border-"+e+":"+i+"px "+n+" "+o:l+";left:0;right: 0;"+e+":0;border-"+e+":"+i+"px "+n+" "+o,s.setAttribute("class","resize__dashed-line"),s},t.prototype.createLineEl=function(e,t){var o=this.options,i=o.immediate,n=o.scrollElSelector,r=o.lineColor,s=o.lineWidth,l=o.lineHoverColor,d=o.lineHoverWidth,u=o.zIndex,c=o.needParentNodeOffset,a=document.createElement("div"),p="position: absolute;background: "+r+";z-index: "+u,m="left"===e||"right"===e,f="right"===e||"bottom"===e,h="flex"===getComputedStyle(this.el.parentNode).display;a.style.cssText=m?p+";width: "+s+"px;top:0;bottom: 0;"+e+": -"+s/2+"px;cursor: col-resize;":p+";height: "+s+"px;left:0;right: 0;"+e+": -"+s/2+"px;cursor: row-resize;",a.mouseoverEvent=function(){a.style.background=l,a.style[m?"width":"height"]=d+"px",a.style[e]="-"+d/2+"px"},a.mouseoutEvent=function(){a.style.background=r,a.style[m?"width":"height"]=s+"px",a.style[e]="-"+s/2+"px"};var v=this.el;return a.mousedownEvent=function(o){var r,s=v||o.target.parentNode,l=s.parentNode,d=m?s.offsetWidth:s.offsetHeight,u=m?l.offsetWidth:l.offsetHeight,a=m?s.offsetLeft:s.offsetTop,p=c?m?l.offsetLeft:l.offsetTop:0,y=n?document.querySelector(n):document.documentElement,E=m?y.scrollLeft:y.scrollTop;document.body.style.userSelect="none";var b=!0,g=function(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!1,!1),t.direction=e,t.moveOffset=r,t.moveOffsetPercent=r/u*100,h?(t[m?"resizeWidth":"resizeHeight"]=f?r-a+p:d+a-r-p,t[m?"resizeWidthPercent":"resizeHeightPercent"]=100*(f?(r-a+p)/u:(d+a-r-p)/u)):(t[m?"resizeWidth":"resizeHeight"]=f?r-a:d+a-r,t[m?"resizeWidthPercent":"resizeHeightPercent"]=100*(f?(r-a)/u:(d+a-r)/u)),v.dispatchEvent(t)};document.onmousemove=function(o){o.preventDefault(),r=m?o.clientX-l.offsetLeft+E:o.clientY-l.offsetTop+E,(b=f?h?r>=a-p&&r<=u:b=r>=a&&r<=u:b=h?r>=0&&r<=a-p+d:r>=0&&r<=a+d)&&(i?g():t&&(t.style.visibility="visible",t.style[e]=h?f?d-r+a-p+"px":r+p-a+"px":f?a+d-r+"px":r-a+"px"))},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,document.body.style.userSelect="auto",i||(t&&(t.style.visibility="hidden"),b&&(g(),t&&(t.style[e]="0px")))}},a.setAttribute("class","resize__line"),a.addEventListener("mousemove",a.mouseoverEvent),a.addEventListener("mouseout",a.mouseoutEvent),a.addEventListener("mousedown",a.mousedownEvent),a},t.prototype.destroy=function(){Array.prototype.slice.call(this.el.querySelectorAll(".resize__line")).forEach((function(e){e.mouseoverEvent&&e.removeEventListener("mousemove",e.mouseoverEvent),e.mouseoutEvent&&e.removeEventListener("mouseout",e.mouseoutEvent),e.mousedownEvent&&e.removeEventListener("mousedown",e.mousedownEvent),e.parentNode&&e.parentNode.removeChild(e)})),this.el.querySelectorAll(".resize__dashed-line").forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},t}(),o=function(o,i,n){var r,s,l=i.arg,d=i.value,u=n||{};l&&(r="all"===l?["top","left","bottom","right"]:[l]),s=r?e(e(e({},u),d),{direction:r}):e(e({},u),d),new t({el:o,options:s}).init()},i=function(e){e.$resize&&e.$resize.destroy()},n={install:function(e,t){e.directive("resize",{mounted:function(e,i){return o(e,i,t)},unmounted:i,inserted:function(e,i){return o(e,i,t)},unbind:i})},mounted:function(e,t){return o(e,t)},unmounted:i,inserted:function(e,t){return o(e,t)},unbind:i};export{n as R};
