import{a as e,b as t}from"./tslib.es6.d5acbd82.js";import{d as n,f as i,e as a,s as o,x as l,c as s,k as d,y as r,a as u,z as c,l as p,T as g,w as h,p as v,b as f,o as m,A as x}from"./index.90e6cb6f.js";var y=n({name:"AnimationDialog",props:{width:{type:String,default:"60vw"},height:{type:String,default:"70vh"},animationMode:{type:Boolean,default:!1},animationIn:{type:String,default:"bounceIn"},animationOut:{type:String,default:"bounceOut"},time:{type:Number,default:500},timingFunction:{type:String,default:"cubic-bezier(0.55,-0.15, 0.71, 1.35)"},openFromItself:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},customClass:String,listenWindowSizeChange:{type:Boolean,default:!1},debounceWait:{type:Number,default:200}},emits:["beforeClose"],setup:function(n,s){var d=this,r=s.emit,u=i(),c=i(),p=i(),g=a((function(){return n.time/1e3})),h=null,v=function(){h&&clearTimeout(h),h=setTimeout((function(){return e(d,void 0,void 0,(function(){var e,n,i,a,o,l,s,d;return t(this,(function(t){switch(t.label){case 0:return e=u.value.getBoundingClientRect(),n=e.width,i=e.height,u.value.style.left="calc(50% - "+n/2+"px",u.value.top="calc(50% - "+i/2+"px)",[4,x()];case 1:return t.sent(),a=u.value.getBoundingClientRect(),o=a.top,l=a.left,s=a.width,d=a.height,p.value.style.top=o+"px",p.value.style.left=l+"px",p.value.style.width=s+"px",p.value.style.height=d+"px",[2]}}))}))}),n.debounceWait)};o((function(){n.listenWindowSizeChange&&window.addEventListener("resize",v)})),l((function(){n.listenWindowSizeChange&&window.removeEventListener("resize",v)}));var f=i(!1),m=null,y=null;return{open:function(i){return e(d,void 0,void 0,(function(){var e,a,o,l,s,d,r,h,v,w,b,C,k,B,T;return t(this,(function(t){switch(t.label){case 0:return n.animationMode?(f.value=!0,[4,x()]):[3,3];case 1:return t.sent(),e=u.value.getBoundingClientRect(),v=e.width,w=e.height,u.value.style.left="calc(50% - "+v/2+"px",u.value.style.top="calc(50% - "+w/2+"px)",[4,x()];case 2:return t.sent(),a=u.value.getBoundingClientRect(),C=a.top,k=a.left,B=a.width,T=a.height,p.value.style.cssText="top:"+C+"px; \n                                    left: "+k+"px;\n                                    width: "+B+"px;\n                                    height: "+T+"px;\n                                    animation: "+n.animationIn+" "+g.value+"s",[3,6];case 3:return f.value=!0,(m=i?"string"==typeof i?document.querySelector(i):i:c.value).classList.add("is-open"),[4,x()];case 4:return t.sent(),o=m.getBoundingClientRect(),l=o.top,s=o.left,d=o.width,r=o.height,p.value.classList.add("animating"),p.value.style.cssText="top:"+l+"px; left: "+s+"px;width: "+d+"px;height: "+r+"px;",h=u.value.getBoundingClientRect(),v=h.width,w=h.height,u.value.style.left="calc(50% - "+v/2+"px",u.value.style.top="calc(50% - "+w/2+"px)",n.openFromItself&&(y=m.cloneNode(!0),m.style.visibility="hidden",S=y,(z=(F=m).parentNode).lastChild===F?z.appendChild(S):z.insertBefore(S,F.nextSibling),y.style.cssText="position:absolute;top:0;left:0;right:0;bottom:0;margin:0;width: auto;height:auto;",p.value.querySelector(".dialog-body").appendChild(y)),[4,x()];case 5:t.sent(),b=u.value.getBoundingClientRect(),C=b.top,k=b.left,B=b.width,T=b.height,p.value.style.cssText="top:"+C+"px; \n                                    left: "+k+"px;\n                                    width: "+B+"px;\n                                    height: "+T+"px;\n                                    transition: "+g.value+"s all "+n.timingFunction,setTimeout((function(){p.value.classList.remove("animating")}),n.time+100),t.label=6;case 6:return[2]}var S,F,z}))}))},close:function(){if(n.animationMode)p.value.style.animation=n.animationOut+" "+g.value+"s",r("beforeClose"),setTimeout((function(){f.value=!1}),n.time-100);else{if(!m)return;var e=m.getBoundingClientRect(),t=e.top,i=e.left,a=e.width,o=e.height;p.value.classList.add("animating"),p.value.style.cssText="top:"+t+"px; \n                                    left: "+i+"px;\n                                    width: "+a+"px;\n                                    height: "+o+"px;\n                                    transition: "+g.value+"s all "+n.timingFunction,r("beforeClose"),setTimeout((function(){m&&(m.classList.remove("is-open"),p.value.classList.remove("animating"),f.value=!1,n.openFromItself&&(m.style.visibility="visible",p.value.querySelector(".dialog-body").removeChild(y)))}),n.time+100)}},staticFake:u,centerFake:c,main:p,show:f}}});const w=h("data-v-1424118a");v("data-v-1424118a");const b={ref:"centerFake",class:"dialog-center-fake"},C=u("span",{class:"line"},null,-1),k=u("span",{class:"line"},null,-1),B={class:"dialog-body"};f();const T=w(((e,t,n,i,a,o)=>(m(),s(g,{to:"body",disabled:!e.appendToBody},[d(u("div",{class:"animation-dialog-wrapper",onClick:t[2]||(t[2]=p(((...t)=>e.close&&e.close(...t)),["self"]))},[u("div",{ref:"staticFake",class:"dialog-static-fake",style:{width:e.width,height:e.height}},null,4),u("div",b,null,512),u("div",{ref:"main",class:["dialog",e.customClass]},[u("div",{class:"icon-close",onClick:t[1]||(t[1]=(...t)=>e.close&&e.close(...t))},[C,k]),u("div",B,[c(e.$slots,"default")])],2)],512),[[r,e.show]])],8,["disabled"]))));!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".animation-dialog-wrapper[data-v-1424118a] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow-y: auto;\n  background: rgba(0, 0, 0, 0.2);\n  cursor: pointer;\n  z-index: 100001;\n}\n.animation-dialog-wrapper .dialog-static-fake[data-v-1424118a] {\n  position: absolute;\n  visibility: hidden;\n}\n.animation-dialog-wrapper .dialog-center-fake[data-v-1424118a] {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  visibility: hidden;\n}\n.animation-dialog-wrapper .dialog[data-v-1424118a] {\n  position: absolute;\n  background: #fff;\n  cursor: default;\n  box-shadow: 0 0 5px #888;\n  width: 50%;\n  overflow: hidden;\n}\n.animation-dialog-wrapper .dialog .dialog-body[data-v-1424118a] {\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  padding: 20px;\n  text-align: left;\n}\n.animation-dialog-wrapper .dialog.animating .dialog-body[data-v-1424118a] {\n  overflow: hidden;\n}\n.animation-dialog-wrapper .dialog .icon-close[data-v-1424118a] {\n  width: 36px;\n  height: 36px;\n  position: absolute;\n  right: 12px;\n  top: 10px;\n  background: transparent;\n  cursor: pointer;\n  z-index: 9999;\n}\n.animation-dialog-wrapper .dialog .icon-close .line[data-v-1424118a] {\n  display: block;\n  position: absolute;\n  width: 20px;\n  height: 2px;\n  top: 17px;\n  right: 8px;\n  transform-origin: center;\n  border-radius: 1px;\n  background: #99a;\n}\n.animation-dialog-wrapper .dialog .icon-close .line[data-v-1424118a]:nth-child(1) {\n  transform: rotate(45deg);\n}\n.animation-dialog-wrapper .dialog .icon-close .line[data-v-1424118a]:nth-child(2) {\n  transform: rotate(-45deg);\n}\n.animation-dialog-wrapper .dialog .icon-close:hover .line[data-v-1424118a] {\n  background: #667;\n}"),y.render=T,y.__scopeId="data-v-1424118a",y.__file="packages/animation-dialog/animation-dialog.vue",y.install=function(e){e.component(y.name,y)};export{y as s};
