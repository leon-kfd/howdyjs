import{_ as t}from"./tslib.es6.3b1b0bea.js";var e=function(){function e(e){var o=e.el,r=e.options;o instanceof HTMLElement?this.el=o:this.el=document.querySelector(o),this.options=t({direction:"y",scrollBarWidth:6,scrollBarOffsetX:0,scrollBarOffsetY:0,scrollBarThumbColor:"#aab",scrollBarThumbBorderRadius:!0,scrollBarTrackColor:"transparent",enableTrackClickScroll:!0,scrollSpeed:20,dragScroll:!1,thumbShow:"always"},r),this.directionArr="all"===this.options.direction?["x","y"]:["x","y"].includes(this.options.direction)?[this.options.direction]:["y"],this.timer=null,this.el.$scroll=this}return e.prototype.init=function(t,e){var o=this;void 0===t&&(t=0),void 0===e&&(e=0),this.scrollWrapper=document.createElement("div"),this.scrollWrapper.style.cssText="position: absolute;top:0;left:0;bottom:0;right:0;transform:translate("+t+"px,"+e+"px)",this.scrollWrapper.setAttribute("class","scroll__wrapper"),this.el.appendChild(this.scrollWrapper),this.el.style.position="relative",this.el.style.overflow="hidden",this.directionArr.map((function(t){o.createScrollBarTrack(t)})),this.options.dragScroll&&this.setDragScroll(this.el,this.directionArr),"hover"===this.options.thumbShow&&this.setDisplayForHover(this.el)},e.prototype.createScrollBarTrack=function(t){var e=this,o="y"===t,r=this.options,l=r.scrollBarWidth,n=r.scrollBarOffsetX,s=r.scrollBarOffsetY,i=r.scrollBarThumbColor,a=r.scrollBarThumbHoverColor,c=r.scrollBarThumbBorderRadius,u=r.scrollBarTrackColor,d=r.enableTrackClickScroll,p=r.scrollSpeed,m=i.includes("gradient");c=c?l/2:0;var h=document.createElement("div");h.setAttribute("direction",t);var f=o?"position: absolute;right: 0;top: 0;height: 100%; width: "+(l+2*n)+"px;background: "+u+";":"position: absolute;left: 0;bottom: 0;width: 100%; height: "+(l+2*n)+"px;background: "+u+";";h.style.cssText=f,h.setAttribute("class","scroll__track_"+t),this.scrollWrapper&&this.scrollWrapper.appendChild(h);var v=document.createElement("div"),y=o?"position: relative;top: 0;right: 0;width: "+(l+2*n)+"px;padding: "+s+"px "+n+"px;box-sizing:border-box;cursor: pointer;":"position: relative;bottom: 0;left: 0;height: "+(l+2*n)+"px;padding: "+n+"px "+s+"px;box-sizing:border-box;cursor: pointer;",b=document.createElement("div"),g="width: 100%;height:100%;border-radius: "+c+"px;";g+=m?"background-image: "+i+";":"background: "+i+";";var x=this.el,w=x.offsetHeight,T=x.scrollHeight,S=x.offsetWidth,_=x.scrollWidth,W=x.scrollTop,B=x.scrollLeft,k=o?w:S,E=o?T:_;if(!(E<=k)){var A=k/E*k;y+=o?"height: "+A+"px;":"width: "+A+"px",v.style.cssText=y,v.setAttribute("class","scroll__thumb"),b.style.cssText=g,b.setAttribute("class","scroll__thumb_inner"),v.appendChild(b),h.appendChild(v);var C=o?W:B,Y=C/E*k;v.style.transform=o?"translateY("+Y+"px)":"translateX("+Y+"px)";var X,L,H=!1,q=E-k,F=k-A;o&&(this.el.onmousewheel=function(t){var e=-t.wheelDelta||t.deltaY;return H||D(h,(C=e<0?C<-e?0:C+e:C>=q-e?q:C+e)/E*k),!1}),a&&(v.onmouseenter=function(){a&&(b.style.background=a)},v.onmouseleave=function(){b.style.background=i}),v.onmousedown=function(t){t.stopPropagation();var e=t.target.parentNode,r=o?t.clientY:t.clientX,l=~~(e.style.transform.match(/\d+(\.\d+)?/)||[0])[0];H=!0,document.onmousemove=function(t){document.body.style.userSelect="none";var e=t.clientY,n=t.clientX,s=(o?e:n)-r+l;(C=s/k*E)<0?(s=0,C=0):C>q&&(s=F,C=q),D(h,s)},document.onmouseup=function(){H=!1,document.body.style.userSelect="auto",document.onmousemove=null,document.onmouseup=null}},d&&(h.onmousedown=function(t){var e=t.target;if(e){var r=(o?t.clientY-e.getBoundingClientRect().top:t.clientX-e.getBoundingClientRect().left)-A/2;r<0?r=0:r>F&&(r=F),D(e,r)}});var D=function(r,l){L&&window.cancelAnimationFrame(L),X=function(){var n,s,i=(r.childNodes[0].style.transform.match(/\d+(\.\d+)?/)||[0])[0];l>(i=~~i)?(i+=p)<l?(C=i/k*E,n=i,s=!1):(C=i>F?q:l/k*E,n=i>F?F:l,s=!0):(i-=p)>l?(C=i/k*E,n=i,s=!1):(C=i<0?0:l/k*E,n=i<0?0:l,s=!0),e.setTranslate(t,C),v.style.transform=o?"translateY("+n+"px)":"translateX("+n+"px)",o?e.el.scrollTop=C:e.el.scrollLeft=C,s?window.cancelAnimationFrame(L):L=window.requestAnimationFrame(X)},L=window.requestAnimationFrame(X)}}},e.prototype.update=function(t){var e=this;void 0===t&&(t=200),null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){if(e.scrollWrapper){var t=window.getComputedStyle(e.scrollWrapper).transform.match(/-?\d+\.?\d{0,}/g),o=~~t[4],r=~~t[5];e.destroy(),e.init(o,r)}}),t)},e.prototype.destroy=function(){var t;this.scrollWrapper&&(null===(t=this.scrollWrapper.parentNode)||void 0===t||t.removeChild(this.scrollWrapper),this.scrollWrapper=null),this.el.mouseenterEvent&&this.el.addEventListener("mouseenter",this.el.mouseenterEvent),this.el.mouseleaveEvent&&this.el.addEventListener("mouseleave",this.el.mouseleaveEvent)},e.prototype.setTranslate=function(t,e){if(this.scrollWrapper){var o=window.getComputedStyle(this.scrollWrapper).transform.match(/-?\d+\.?\d{0,}/g),r=o[0],l=o[1],n=o[2],s=o[3],i=o[4],a=o[5];"x"===t?this.scrollWrapper.style.transform="matrix("+r+","+l+","+n+","+s+","+e+","+a+")":"y"===t&&(this.scrollWrapper.style.transform="matrix("+r+","+l+","+n+","+s+","+i+","+e+")")}},e.prototype.setDisplayForHover=function(t){var e=Array.from(t.querySelectorAll(".scroll__thumb"));e.map((function(t){t.style.cssText=t.style.cssText+"opacity: 0;transition: opacity .4s ease-in-out"})),t.mouseenterEvent=function(){e.map((function(t){t.style.opacity="1"}))},t.mouseleaveEvent=function(){e.map((function(t){t.style.opacity="0"}))},t.addEventListener("mouseenter",t.mouseenterEvent),t.addEventListener("mouseleave",t.mouseleaveEvent)},e.prototype.setDragScroll=function(t,e){t.onmousedown=function(o){var r=t.scrollTop,l=t.scrollLeft,n=t.scrollHeight,s=t.offsetHeight,i=t.scrollWidth,a=t.offsetWidth,c=o.clientX,u=o.clientY,d=[i-a,n-s],p=d[0],m=d[1],h=[a-a/i*a,s-s/n*s],f=h[0],v=h[1];document.body.style.userSelect="none",document.body.style.cursor="pointer",document.onmousemove=function(o){var d=o.clientX,h=o.clientY,y=[c-d+l,u-h+r],b=y[0],g=y[1],x=[b/i*a,g/n*s],w=x[0],T=x[1];b<0?(w=0,b=0):b>p&&(w=f,b=p),g<0?(T=0,g=0):g>m&&(T=v,g=m),t.querySelector(".scroll__wrapper").style.transform="translate("+b+"px, "+g+"px)",e.includes("x")&&(t.querySelector(".scroll__track_x .scroll__thumb").style.transform="translateX("+w+"px)"),e.includes("y")&&(t.querySelector(".scroll__track_y .scroll__thumb").style.transform="translateY("+T+"px)"),t.scrollTop=g,t.scrollLeft=b},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,document.body.style.userSelect="default",document.body.style.cursor="default"}}},e}(),o=function(o,r,l){var n=r.arg,s=r.value;if(!/(Android|iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)){var i=t(t(t({},l||{}),s),{direction:n});new e({el:o,options:i}).init()}},r=function(t){t.$scroll&&t.$scroll.destroy()},l={install:function(t,e){t.directive("scroll",{mounted:function(t,r){return o(t,r,e)},unmounted:r,inserted:function(t,r){return o(t,r,e)},unbind:r})},mounted:function(t,e){return o(t,e)},unmounted:r,inserted:function(t,e){return o(t,e)},unbind:r};export{l as S};
