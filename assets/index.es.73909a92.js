class e{constructor({el:e,options:t}){e instanceof HTMLElement?this.el=e:this.el=document.querySelector(e),this.options=Object.assign({immediate:!1,direction:["right"],scrollElSelector:null,lineColor:"#aab",lineWidth:2,lineHoverColor:"#88f",lineHoverWidth:4,tipLineColor:"#262626",tipLineWidth:1,tipLineStyle:"dashed",zIndex:999,needParentNodeOffset:!0},t),this.directionArr=this.options.direction||["right"],this.el.$resize=this}init(){const{position:e}=getComputedStyle(this.el),{position:t}=getComputedStyle(this.el.parentNode);"static"===e&&(this.el.style.position="relative"),"static"===t&&console.warn("[@howdyjs/resize] Element parentNode position can not be static!"),this.directionArr.map((e=>{if(this.options.immediate){const t=this.createLineEl(e);this.el.appendChild(t)}else{const t=this.createDashedLineEl(e),i=this.createLineEl(e,t);this.el.appendChild(t),this.el.appendChild(i)}}))}createDashedLineEl(e){const{tipLineColor:t,tipLineWidth:i,tipLineStyle:o,zIndex:n}=this.options,s=document.createElement("div"),r=`position:absolute;z-index: ${n};visibility: hidden;`,l="left"===e||"right"===e;return s.style.cssText=l?`${r};top:0;bottom: 0;${e}:0;border-${e}:${i}px ${o} ${t}`:`${r};left:0;right: 0;${e}:0;border-${e}:${i}px ${o} ${t}`,s.setAttribute("class","resize__dashed-line"),s}createLineEl(e,t){const{immediate:i,lineColor:o,lineWidth:n,lineHoverColor:s,lineHoverWidth:r,zIndex:l}=this.options,d=document.createElement("div"),c=`position: absolute;background: ${o};z-index: ${l}`,u="left"===e||"right"===e,h="right"===e||"bottom"===e;d.style.cssText=u?`${c};width: ${n}px;top:0;bottom: 0;${e}: -${n/2}px;cursor: col-resize;`:`${c};height: ${n}px;left:0;right: 0;${e}: -${n/2}px;cursor: row-resize;`,d.mouseoverEvent=function(){d.style.background=s,d.style[u?"width":"height"]=`${r}px`,d.style[e]=`-${r/2}px`},d.mouseoutEvent=function(){d.style.background=o,d.style[u?"width":"height"]=`${n}px`,d.style[e]=`-${n/2}px`};const a=this.el;return d.mousedownEvent=function(o){const n=(a||o.target.parentNode).parentNode;let s;const r=u?n.offsetWidth:n.offsetHeight;document.body.style.userSelect="none";let l=!0;const d=()=>{const t=u?a.offsetWidth:a.offsetHeight,i=u?a.offsetLeft:a.offsetTop,o=h?i+t+s:i+s,n=h?t+s:t-s,l=document.createEvent("HTMLEvents");l.initEvent("resize",!1,!1),l.direction=e,l.moveOffset=o,l.moveOffsetPercent=o/r*100,l[u?"resizeWidth":"resizeHeight"]=n,l[u?"resizeWidthPercent":"resizeHeightPercent"]=n/r*100,a.dispatchEvent(l)};document.onmousemove=function(o){o.preventDefault();const{x:n,y:c}=a.getBoundingClientRect(),m=u?a.offsetWidth:a.offsetHeight,p=u?a.offsetLeft:a.offsetTop;s=h?u?o.clientX-n-m:o.clientY-c-m:u?o.clientX-n:o.clientY-c,l=h?-s<=m&&p+m+s<=r:s<=m&&p+s>=0,l&&(i?d():t&&(t.style.visibility="visible",t.style[e]=`${h?-s:s}px`))},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,document.body.style.userSelect="auto",i||(t&&(t.style.visibility="hidden"),l&&(d(),t&&(t.style[e]="0px")))}},d.setAttribute("class","resize__line"),d.addEventListener("mousemove",d.mouseoverEvent),d.addEventListener("mouseout",d.mouseoutEvent),d.addEventListener("mousedown",d.mousedownEvent),d}destroy(){Array.prototype.slice.call(this.el.querySelectorAll(".resize__line")).forEach((e=>{e.mouseoverEvent&&e.removeEventListener("mousemove",e.mouseoverEvent),e.mouseoutEvent&&e.removeEventListener("mouseout",e.mouseoutEvent),e.mousedownEvent&&e.removeEventListener("mousedown",e.mousedownEvent),e.parentNode&&e.parentNode.removeChild(e)})),this.el.querySelectorAll(".resize__dashed-line").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}}const t=(t,i,o)=>{const{arg:n,value:s}=i,r=o||{};let l,d;n&&(l="all"===n?["top","left","bottom","right"]:[n]),d=l?Object.assign(Object.assign(Object.assign({},r),s),{direction:l}):Object.assign(Object.assign({},r),s);new e({el:t,options:d}).init()},i=e=>{e.$resize&&e.$resize.destroy()},o={mounted:(e,i)=>t(e,i),unmounted:i,inserted:(e,i)=>t(e,i),unbind:i,install:(e,o)=>{e.directive("resize",{mounted:(e,i)=>t(e,i,o),unmounted:i,inserted:(e,i)=>t(e,i,o),unbind:i})}};export{o as R};
