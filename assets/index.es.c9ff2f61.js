class e{constructor({el:e,options:t}){e instanceof HTMLElement?this.el=e:this.el=document.querySelector(e),this.options=Object.assign({immediate:!1,direction:["right"],scrollElSelector:null,lineColor:"#aab",lineWidth:2,lineHoverColor:"#88f",lineHoverWidth:4,tipLineColor:"#262626",tipLineWidth:1,tipLineStyle:"dashed",zIndex:999,needParentNodeOffset:!0},t),this.directionArr=this.options.direction||["right"],this.el.$resize=this}init(){const{position:e}=getComputedStyle(this.el);"static"===e&&(this.el.style.position="relative"),this.directionArr.map((e=>{if(this.options.immediate){const t=this.createLineEl(e);this.el.appendChild(t)}else{const t=this.createDashedLineEl(e),i=this.createLineEl(e,t);this.el.appendChild(t),this.el.appendChild(i)}}))}createDashedLineEl(e){const{tipLineColor:t,tipLineWidth:i,tipLineStyle:o,zIndex:n}=this.options,s=document.createElement("div"),r=`position:absolute;z-index: ${n};visibility: hidden;`,l="left"===e||"right"===e;return s.style.cssText=l?`${r};top:0;bottom: 0;${e}:0;border-${e}:${i}px ${o} ${t}`:`${r};left:0;right: 0;${e}:0;border-${e}:${i}px ${o} ${t}`,s.setAttribute("class","resize__dashed-line"),s}createLineEl(e,t){const{immediate:i,scrollElSelector:o,lineColor:n,lineWidth:s,lineHoverColor:r,lineHoverWidth:l,zIndex:d,needParentNodeOffset:c}=this.options,u=document.createElement("div"),h=`position: absolute;background: ${n};z-index: ${d}`,m="left"===e||"right"===e,a="right"===e||"bottom"===e,p="flex"===getComputedStyle(this.el.parentNode).display;u.style.cssText=m?`${h};width: ${s}px;top:0;bottom: 0;${e}: -${s/2}px;cursor: col-resize;`:`${h};height: ${s}px;left:0;right: 0;${e}: -${s/2}px;cursor: row-resize;`,u.mouseoverEvent=function(){u.style.background=r,u.style[m?"width":"height"]=`${l}px`,u.style[e]=`-${l/2}px`},u.mouseoutEvent=function(){u.style.background=n,u.style[m?"width":"height"]=`${s}px`,u.style[e]=`-${s/2}px`};const v=this.el;return u.mousedownEvent=function(n){const s=v||n.target.parentNode,r=s.parentNode;let l;const d=m?s.offsetWidth:s.offsetHeight,u=m?r.offsetWidth:r.offsetHeight,h=m?s.offsetLeft:s.offsetTop,f=c?m?r.offsetLeft:r.offsetTop:0,E=o?document.querySelector(o):document.documentElement,y=m?E.scrollLeft:E.scrollTop;document.body.style.userSelect="none";let g=!0;const $=()=>{const t=document.createEvent("HTMLEvents");t.initEvent("resize",!1,!1),t.direction=e,t.moveOffset=l,t.moveOffsetPercent=l/u*100,p?(t[m?"resizeWidth":"resizeHeight"]=a?l-h+f:d+h-l-f,t[m?"resizeWidthPercent":"resizeHeightPercent"]=100*(a?(l-h+f)/u:(d+h-l-f)/u)):(t[m?"resizeWidth":"resizeHeight"]=a?l-h:d+h-l,t[m?"resizeWidthPercent":"resizeHeightPercent"]=100*(a?(l-h)/u:(d+h-l)/u)),v.dispatchEvent(t)};document.onmousemove=function(o){o.preventDefault(),l=m?o.clientX-r.offsetLeft+y:o.clientY-r.offsetTop+y,g=a?p?l>=h-f&&l<=u:g=l>=h&&l<=u:g=p?l>=0&&l<=h-f+d:l>=0&&l<=h+d,g&&(i?$():t&&(t.style.visibility="visible",t.style[e]=p?a?d-l+h-f+"px":l+f-h+"px":a?h+d-l+"px":l-h+"px"))},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,document.body.style.userSelect="auto",i||(t&&(t.style.visibility="hidden"),g&&($(),t&&(t.style[e]="0px")))}},u.setAttribute("class","resize__line"),u.addEventListener("mousemove",u.mouseoverEvent),u.addEventListener("mouseout",u.mouseoutEvent),u.addEventListener("mousedown",u.mousedownEvent),u}destroy(){Array.prototype.slice.call(this.el.querySelectorAll(".resize__line")).forEach((e=>{e.mouseoverEvent&&e.removeEventListener("mousemove",e.mouseoverEvent),e.mouseoutEvent&&e.removeEventListener("mouseout",e.mouseoutEvent),e.mousedownEvent&&e.removeEventListener("mousedown",e.mousedownEvent),e.parentNode&&e.parentNode.removeChild(e)})),this.el.querySelectorAll(".resize__dashed-line").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}}const t=(t,i,o)=>{const{arg:n,value:s}=i,r=o||{};let l,d;n&&(l="all"===n?["top","left","bottom","right"]:[n]),d=l?Object.assign(Object.assign(Object.assign({},r),s),{direction:l}):Object.assign(Object.assign({},r),s);new e({el:t,options:d}).init()},i=e=>{e.$resize&&e.$resize.destroy()},o={install:(e,o)=>{e.directive("resize",{mounted:(e,i)=>t(e,i,o),unmounted:i,inserted:(e,i)=>t(e,i,o),unbind:i})},mounted:(e,i)=>t(e,i),unmounted:i,inserted:(e,i)=>t(e,i),unbind:i};export{o as R};
