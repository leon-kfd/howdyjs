function t(t,e,n){const o=document.createElement(t);return o.setAttribute("id",e),n&&(o.innerText=n),o}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}("#__imgZoomMask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.9);\n  z-index: 99999;\n  display: flex;\n  animation: fadeIn .4s;\n  overflow: hidden;\n  align-items: center;\n  justify-content: center; }\n  #__imgZoomMask #__imgZoomWrapper {\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n    #__imgZoomMask #__imgZoomWrapper #__img {\n      margin: auto;\n      max-width: 85%; }\n  #__imgZoomMask #__imgZoomTitle {\n    position: absolute;\n    top: 10px;\n    width: 100%;\n    text-align: center;\n    line-height: 30px;\n    color: #c8c8cc;\n    font-weight: bold;\n    font-size: 22px;\n    padding: 0 50px;\n    box-sizing: border-box; }\n  #__imgZoomMask #__imgZoomFooter {\n    position: absolute;\n    bottom: 10px;\n    width: 100%;\n    text-align: center;\n    line-height: 30px;\n    color: #c8c8cc;\n    font-weight: bold; }\n  #__imgZoomMask #__leftBtn,\n  #__imgZoomMask #__rightBtn {\n    position: absolute;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    background: rgba(0, 0, 0, 0.65);\n    top: 50%;\n    transform: translateY(-50%);\n    cursor: pointer; }\n    #__imgZoomMask #__leftBtn:after,\n    #__imgZoomMask #__rightBtn:after {\n      content: '';\n      position: absolute;\n      width: 20px;\n      height: 20px;\n      top: 15px;\n      box-sizing: border-box; }\n    #__imgZoomMask #__leftBtn:hover,\n    #__imgZoomMask #__rightBtn:hover {\n      background: rgba(0, 0, 0, 0.85); }\n  #__imgZoomMask #__leftBtn {\n    left: 20px; }\n    #__imgZoomMask #__leftBtn:after {\n      border-top: 2px solid #99a;\n      border-left: 2px solid #99a;\n      transform: rotate(-45deg);\n      left: 20px; }\n    #__imgZoomMask #__leftBtn:hover:after {\n      border-top: 2px solid #eee;\n      border-left: 2px solid #eee; }\n  #__imgZoomMask #__rightBtn {\n    right: 20px; }\n    #__imgZoomMask #__rightBtn:after {\n      border-top: 2px solid #889;\n      border-right: 2px solid #889;\n      transform: rotate(45deg);\n      right: 20px; }\n    #__imgZoomMask #__rightBtn:hover:after {\n      border-top: 2px solid #eee;\n      border-right: 2px solid #eee; }\n  #__imgZoomMask #__closeBtn {\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    top: 10px;\n    right: 10px;\n    cursor: pointer;\n    z-index: 100000; }\n    #__imgZoomMask #__closeBtn::before {\n      content: '';\n      position: absolute;\n      width: 30px;\n      border-top: 2px solid #eee;\n      left: 5px;\n      top: 19px;\n      transform: rotate(45deg); }\n    #__imgZoomMask #__closeBtn::after {\n      content: '';\n      position: absolute;\n      width: 30px;\n      border-top: 2px solid #eee;\n      left: 5px;\n      top: 19px;\n      transform: rotate(-45deg); }\n  #__imgZoomMask #__imgZoomLoader {\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    top: calc(50% - 20px);\n    left: calc(50% - 20px);\n    background: #b9b9eb;\n    z-index: 100000;\n    animation: squareLoader 1.2s infinite ease-in-out; }\n\n@keyframes squareLoader {\n  0% {\n    transform: perspective(120px) rotateX(0deg) rotateY(0deg); }\n  50% {\n    transform: perspective(120px) rotateX(-180.1deg) rotateY(0deg); }\n  100% {\n    transform: perspective(120px) rotateX(-180deg) rotateY(-179.9deg); } }\n");const e={};class n{constructor({el:n,options:o}){if(n instanceof HTMLElement?this.el=n:this.el=document.querySelector(n),this.imgSrc=(null==o?void 0:o.imgSrc)||this.el.getAttribute("src"),this.el.$imgZoom=this,null==o?void 0:o.group)if(this.group=o.group,e[this.group]){const t=e[this.group].push({title:o.title,imgSrc:this.imgSrc});this.groupIndex=t-1}else e[this.group]=[{title:o.title,imgSrc:this.imgSrc}],this.groupIndex=0;(null==o?void 0:o.zoomCursor)&&(this.el.style.cursor="zoom-in"),this.clickHandler=n=>{(null==o?void 0:o.preventDefault)&&n.preventDefault();const i=t("div","__imgZoomMask"),r=t("div","__imgZoomWrapper");let s,l;document.body.append(i);const d=!1!==(null==o?void 0:o.showLoading);d?(l=(null==o?void 0:o.customLoading)?o.customLoading():t("div","__imgZoomLoader"),i.appendChild(l),s=new Image,s.src=this.imgSrc,s.setAttribute("id","__img"),s.onload=()=>{r.contains(s)||(i.appendChild(r),r.appendChild(s)),r.style.display="flex",l.style.display="none"}):(i.appendChild(r),s=new Image,s.src=this.imgSrc,s.setAttribute("id","__img"),r.style.display="flex",r.appendChild(s));const p=()=>{i.style.opacity="0",i.style.transition="all 0.4s",setTimeout((()=>{var t;null===(t=null==i?void 0:i.parentNode)||void 0===t||t.removeChild(i)}),400)};if(null==o?void 0:o.showCloseBtn){const e=t("div","__closeBtn");e.addEventListener("click",p),i.appendChild(e)}else i.addEventListener("click",p),(null==o?void 0:o.zoomCursor)&&(i.style.cursor="zoom-out");let a;if((null==o?void 0:o.title)&&(a=t("div","__imgZoomTitle",o.title),i.appendChild(a)),this.group&&e[this.group]){let n=this.groupIndex;const o=t("div","__imgZoomFooter",`${n+1} / ${e[this.group].length}`);i.appendChild(o);const p=t("div","__leftBtn");p.addEventListener("click",(t=>{n>0&&(r.style.display="none",s.src=e[this.group][--n].imgSrc,d?s.complete||(l.style.display="block"):setTimeout((()=>{r.style.display="flex"})),o.innerText=`${n+1} / ${e[this.group].length}`,a&&(a.innerText=`${e[this.group][n].title}`)),t.stopPropagation()})),i.appendChild(p);const g=t("div","__rightBtn");g.addEventListener("click",(t=>{n<e[this.group].length-1&&(r.style.display="none",s.src=e[this.group][++n].imgSrc,d?s.complete||(l.style.display="block"):setTimeout((()=>{r.style.display="flex"})),o.innerText=`${n+1} / ${e[this.group].length}`,a&&(a.innerText=`${e[this.group][n].title}`)),t.stopPropagation()})),i.appendChild(g)}},this.el.addEventListener("click",this.clickHandler)}destory(){if(this.el.removeEventListener("click",this.clickHandler),this.group&&this.groupIndex&&this.groupIndex>=0){const t=e[this.group].findIndex((t=>t.imgSrc=this.imgSrc));~t&&e[this.group].splice(t,1)}}}const o=(t,e)=>{const{arg:o,value:i}=e;let r={};i?"string"==typeof i?r.imgSrc=i:r=i:r.imgSrc=t.getAttribute("src"),o&&(r.group=o),new n({el:t,options:r})},i=t=>{t.$imgZoom&&t.$imgZoom.destory()},r={install(t){t.directive("img-zoom",{mounted:o,unmounted:i,inserted:o,unbind:i})},mounted:o,unmounted:i,inserted:o,unbind:i};export{r as I};
